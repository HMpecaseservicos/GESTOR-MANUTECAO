{% extends "base.html" %}

{% block title %}{% if is_servico %}Frota & Equipamentos{% else %}Frota{% endif %}{% endblock %}

{% block content %}
<div class="row mb-4">
    <div class="col-12">
        <h1 class="display-6">{% if is_servico %}Gest√£o de Frota & Equipamentos{% else %}Gest√£o de Frota{% endif %}</h1>
        <p class="text-muted">{% if is_servico %}Ativos dos seus clientes: ve√≠culos, m√°quinas e equipamentos{% else %}Controle completo da sua frota{% endif %}</p>
    </div>
</div>

<div class="row mb-3">
    <div class="col-md-4">
        <button class="btn btn-primary" data-bs-toggle="modal" data-bs-target="#novoVeiculoModal">
            <i class="fas fa-plus"></i> {% if is_servico %}Novo Ativo{% else %}Novo Ve√≠culo{% endif %}
        </button>
        <button class="btn btn-outline-secondary ms-2" data-bs-toggle="modal" data-bs-target="#gerenciarCategoriasModal">
            <i class="fas fa-cog"></i> Categorias
        </button>
    </div>
    <div class="col-md-8">
        <div class="d-flex gap-2 filtros-container">
            <input type="text" class="form-control" placeholder="Buscar..." id="searchInput" style="max-width: 200px;">
            <select class="form-select" id="filterStatus" style="max-width: 150px;">
                <option value="">Status</option>
                <option value="Operacional">Operacional</option>
                <option value="Manuten√ß√£o">Manuten√ß√£o</option>
                <option value="Parado">Parado</option>
            </select>
            <select class="form-select" id="filterTipo" style="max-width: 150px;">
                <option value="">Tipo</option>
                <option value="Caminh√£o">Caminh√£o</option>
                <option value="Van">Van</option>
                <option value="Carro">Carro</option>
                <option value="Moto">Moto</option>
                <option value="M√°quina">M√°quina</option>
                <option value="Equipamento">Equipamento</option>
            </select>
            {% if is_servico %}
            <select class="form-select" id="filterCliente" style="max-width: 180px;">
                <option value="">Cliente</option>
                {% for cliente in clientes %}
                <option value="{{ cliente.id }}">{{ cliente.nome }}</option>
                {% endfor %}
            </select>
            {% endif %}
            <button class="btn btn-outline-secondary" type="button" onclick="limparFiltros()" title="Limpar filtros">
                <i class="fas fa-times"></i>
            </button>
        </div>
    </div>
</div>

<div class="card">
    <div class="card-header bg-primary text-white">
        <h5 class="mb-0"><i class="fas fa-list"></i> Lista de Ativos</h5>
    </div>
    <div class="card-body p-0">
        <div class="row p-3" id="listaVeiculos">
            {% for veiculo in veiculos %}
            {% set tipo_lower = veiculo.tipo|lower if veiculo.tipo else '' %}
            {% set unidade = 'hr' if veiculo.unidade_medida == 'hr' else 'km' %}
            <div class="col-md-6 col-lg-4 mb-4 veiculo-card" data-status="{{ veiculo.status }}" data-tipo="{{ veiculo.tipo }}" data-cliente="{{ veiculo.cliente_id or '' }}">
                <div class="card h-100 shadow-sm">
                    <div class="card-header d-flex justify-content-between align-items-center">
                        <div>
                            {% if tipo_lower in ['caminh√£o', 'caminhao'] %}
                            <span class="badge bg-primary"><i class="fas fa-truck"></i> {{ veiculo.tipo }}</span>
                            {% elif tipo_lower in ['van'] %}
                            <span class="badge bg-info"><i class="fas fa-shuttle-van"></i> {{ veiculo.tipo }}</span>
                            {% elif tipo_lower in ['pickup', 'carro'] %}
                            <span class="badge bg-secondary"><i class="fas fa-car"></i> {{ veiculo.tipo }}</span>
                            {% elif tipo_lower in ['moto'] %}
                            <span class="badge bg-dark"><i class="fas fa-motorcycle"></i> {{ veiculo.tipo }}</span>
                            {% elif tipo_lower in ['m√°quina', 'maquina'] %}
                            <span class="badge bg-warning text-dark"><i class="fas fa-cogs"></i> {{ veiculo.tipo }}</span>
                            {% elif tipo_lower in ['equipamento', 'ferramenta', 'compressor', 'gerador', 'bomba', 'prensa'] %}
                            <span class="badge bg-success"><i class="fas fa-tools"></i> {{ veiculo.tipo }}</span>
                            {% elif tipo_lower in ['implemento'] %}
                            <span class="badge bg-success"><i class="fas fa-tractor"></i> {{ veiculo.tipo }}</span>
                            {% elif tipo_lower in ['empilhadeira'] %}
                            <span class="badge bg-warning text-dark"><i class="fas fa-dolly"></i> {{ veiculo.tipo }}</span>
                            {% elif tipo_lower in ['guincho'] %}
                            <span class="badge bg-danger"><i class="fas fa-truck-pickup"></i> {{ veiculo.tipo }}</span>
                            {% else %}
                            <span class="badge bg-secondary"><i class="fas fa-cube"></i> {{ veiculo.tipo or 'Outro' }}</span>
                            {% endif %}
                        </div>
                        <div>
                            {% if veiculo.status == 'Operacional' %}
                                <span class="badge bg-success">{{ veiculo.status }}</span>
                            {% elif veiculo.status == 'Manuten√ß√£o' %}
                                <span class="badge bg-warning">{{ veiculo.status }}</span>
                            {% else %}
                                <span class="badge bg-danger">{{ veiculo.status }}</span>
                            {% endif %}
                        </div>
                    </div>
                    <div class="card-body">
                        <div class="mb-2">
                            <strong><i class="fas fa-industry text-primary"></i> Marca/Modelo:</strong><br>
                            <span class="badge bg-info">{{ veiculo.marca }} {{ veiculo.modelo }}</span>
                        </div>
                        <div class="mb-2">
                            <strong><i class="fas fa-id-card text-info"></i> Placa/Ident.:</strong><br>
                            <span class="text-primary">{{ veiculo.placa }}</span>
                        </div>
                        {% if is_servico %}
                        <div class="mb-2">
                            <strong><i class="fas fa-user text-success"></i> Cliente:</strong><br>
                            {% if veiculo.cliente_nome %}
                            <span class="badge bg-info">{{ veiculo.cliente_nome }}</span>
                            {% else %}
                            <span class="text-muted">-</span>
                            {% endif %}
                        </div>
                        {% endif %}
                        <div class="mb-2">
                            <strong><i class="fas fa-calendar text-secondary"></i> Ano:</strong><br>
                            <span class="text-muted">{{ veiculo.ano or '-' }}</span>
                        </div>
                        <div class="mb-2">
                            <strong><i class="fas fa-tachometer-alt text-warning"></i> Medicao:</strong><br>
                            <span class="badge bg-info">{{ "{:,}".format(veiculo.quilometragem|default(0, true)) }} {{ unidade }}</span>
                        </div>
                        <div class="mb-2">
                            <strong><i class="fas fa-calendar-check text-warning"></i> Proxima Manutencao:</strong><br>
                            {% if veiculo.proxima_manutencao %}
                                <span class="text-warning">{{ veiculo.proxima_manutencao }}</span>
                            {% else %}
                                <span class="text-muted">Nao agendada</span>
                            {% endif %}
                        </div>
                        <div class="mb-2">
                            <strong><i class="fas fa-wrench text-primary"></i> Manutencoes:</strong><br>
                            <span class="badge bg-primary">{{ veiculo.total_manutencoes|default(0) }}</span>
                        </div>
                    </div>
                    <div class="card-footer bg-transparent">
                        <div class="btn-group w-100" role="group">
                            <a href="{{ url_for('detalhes_veiculo', veiculo_id=veiculo.id) }}" 
                               class="btn btn-sm btn-outline-primary" title="Ver Detalhes">
                                <i class="fas fa-eye"></i>
                            </a>
                            <button class="btn btn-sm btn-outline-warning" title="Editar" onclick="editarVeiculo({{ veiculo.id }})">
                                <i class="fas fa-edit"></i>
                            </button>
                            <button class="btn btn-sm btn-outline-danger" title="Excluir" onclick="excluirVeiculo({{ veiculo.id }}, '{{ veiculo.marca }} {{ veiculo.modelo }} - {{ veiculo.placa }}')">
                                <i class="fas fa-trash"></i>
                            </button>
                        </div>
                    </div>
                </div>
            </div>
            {% else %}
            <div class="col-12" id="row-empty">
                <div class="card shadow-sm">
                    <div class="card-body text-center py-5">
                        <i class="fas fa-truck fa-3x mb-3 opacity-50"></i>
                        <p class="text-muted mb-2">Nenhum ativo cadastrado ainda</p>
                        <button class="btn btn-primary btn-sm" data-bs-toggle="modal" data-bs-target="#novoVeiculoModal">
                            <i class="fas fa-plus"></i> Cadastrar primeiro ativo
                        </button>
                    </div>
                </div>
            </div>
            {% endfor %}
        </div>
    </div>
</div>

<!-- Modal Novo Ve√≠culo/Equipamento -->
<div class="modal fade" id="novoVeiculoModal" tabindex="-1">
    <div class="modal-dialog modal-lg">
        <div class="modal-content">
            <div class="modal-header bg-primary text-white">
                <h5 class="modal-title"><i class="fas fa-plus"></i> {% if is_servico %}Novo Ve√≠culo/Equipamento{% else %}Novo Ve√≠culo{% endif %}</h5>
                <button type="button" class="btn-close btn-close-white" data-bs-dismiss="modal"></button>
            </div>
            <div class="modal-body">
                <form id="novoVeiculoForm">
                    <div class="row">
                        <div class="col-md-6 mb-3">
                            <label class="form-label">Tipo/Categoria *</label>
                            <select class="form-select" name="tipo" id="tipo" required onchange="ajustarCampoQuilometragem('novo')">
                                <option value="">Selecione o tipo</option>
                                {% if categorias %}
                                    {% set grupos = [] %}
                                    {% for cat in categorias %}
                                        {% if cat.grupo not in grupos %}
                                            {% if grupos %}
                                </optgroup>
                                            {% endif %}
                                <optgroup label="{{ 'üöó' if cat.grupo == 'Ve√≠culo' else 'üîß' }} {{ cat.grupo }}s">
                                            {% set _ = grupos.append(cat.grupo) %}
                                        {% endif %}
                                    <option value="{{ cat.nome }}"><i class="fas {{ cat.icone }}"></i> {{ cat.nome }}</option>
                                    {% endfor %}
                                </optgroup>
                                {% else %}
                                <optgroup label="üöó Ve√≠culos">
                                    <option value="Caminh√£o">üöõ Caminh√£o</option>
                                    <option value="Van">üöê Van</option>
                                    <option value="Pickup">üõª Pickup</option>
                                    <option value="Carro">üöó Carro</option>
                                    <option value="Moto">üèçÔ∏è Moto</option>
                                </optgroup>
                                {% if is_servico %}
                                <optgroup label="üîß Equipamentos">
                                    <option value="Equipamento">‚öôÔ∏è Equipamento</option>
                                    <option value="M√°quina">üèóÔ∏è M√°quina</option>
                                    <option value="Implemento">üî© Implemento Agr√≠cola</option>
                                    <option value="Ferramenta">üõ†Ô∏è Ferramenta</option>
                                    <option value="Compressor">üí® Compressor</option>
                                    <option value="Gerador">‚ö° Gerador</option>
                                    <option value="Bomba">üíß Bomba Hidr√°ulica</option>
                                    <option value="Prensa">üî® Prensa</option>
                                    <option value="Empilhadeira">üì¶ Empilhadeira</option>
                                    <option value="Guincho">üèóÔ∏è Guincho/Munck</option>
                                </optgroup>
                                {% else %}
                                <optgroup label="üîß M√°quinas">
                                    <option value="M√°quina">üèóÔ∏è M√°quina</option>
                                </optgroup>
                                {% endif %}
                                {% endif %}
                            </select>
                        </div>
                        <div class="col-md-6 mb-3">
                            <label class="form-label">Marca/Fabricante *</label>
                            <input type="text" class="form-control" name="marca" required placeholder="Ex: Volvo, Caterpillar, Tramontina...">
                        </div>
                    </div>
                    <div class="row">
                        <div class="col-md-6 mb-3">
                            <label class="form-label">Modelo/Descri√ß√£o *</label>
                            <input type="text" class="form-control" name="modelo" required placeholder="Ex: FH 460, Prensa Hidr√°ulica 10T...">
                        </div>
                        <div class="col-md-6 mb-3">
                            <label class="form-label">Placa/Identifica√ß√£o *</label>
                            <input type="text" class="form-control" name="placa" required placeholder="Ex: ABC1234 ou EQUIP-001">
                            <small class="text-muted">Use c√≥digo interno para equipamentos sem placa</small>
                        </div>
                    </div>
                    <div class="row">
                        <div class="col-md-6 mb-3">
                            <label class="form-label">Ano</label>
                            <input type="number" class="form-control" name="ano" min="1990" max="2030">
                        </div>
                        <div class="col-md-6 mb-3">
                            <label class="form-label" id="label-quilometragem-novo">Quilometragem / Horas</label>
                            <div class="input-group">
                                <input type="number" class="form-control" name="quilometragem" id="input-quilometragem-novo" min="0" placeholder="0">
                                <select class="form-select" id="unidade-quilometragem-novo" name="unidade_medida" style="max-width: 80px;">
                                    <option value="km">km</option>
                                    <option value="hr">hr</option>
                                </select>
                            </div>
                            <small class="text-muted">Use "hr" para m√°quinas/equipamentos</small>
                        </div>
                    </div>
                    <div class="mb-3">
                        <label class="form-label">Pr√≥xima Manuten√ß√£o</label>
                        <input type="date" class="form-control" name="proxima_manutencao">
                    </div>
                    {% if is_servico %}
                    <div class="mb-3">
                        <label class="form-label">Cliente <span class="text-danger">*</span></label>
                        <select class="form-select" name="cliente_id" id="cliente_id" required>
                            <option value="">Selecione o cliente</option>
                            {% for cliente in clientes %}
                            <option value="{{ cliente.id }}">{{ cliente.nome }}</option>
                            {% endfor %}
                        </select>
                        <div class="form-text">Obrigat√≥rio: selecione o cliente propriet√°rio do ve√≠culo</div>
                    </div>
                    {% endif %}
                </form>
            </div>
            <div class="modal-footer">
                <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Cancelar</button>
                <button type="button" class="btn btn-primary" onclick="salvarVeiculo()">
                    <i class="fas fa-save"></i> Salvar
                </button>
            </div>
        </div>
    </div>
</div>

<!-- Modal Editar Ve√≠culo/Equipamento -->
<div class="modal fade" id="editarVeiculoModal" tabindex="-1">
    <div class="modal-dialog modal-lg">
        <div class="modal-content">
            <div class="modal-header bg-warning">
                <h5 class="modal-title"><i class="fas fa-edit"></i> {% if is_servico %}Editar Ve√≠culo/Equipamento{% else %}Editar Ve√≠culo{% endif %}</h5>
                <button type="button" class="btn-close" data-bs-dismiss="modal"></button>
            </div>
            <div class="modal-body">
                <form id="editarVeiculoForm">
                    <input type="hidden" id="edit-veiculo-id">
                    <div class="row">
                        <div class="col-md-6 mb-3">
                            <label class="form-label">Tipo/Categoria</label>
                            <select class="form-select" id="edit-tipo" required onchange="ajustarCampoQuilometragem('edit')">
                                <option value="">Selecione o tipo</option>
                                {% if categorias %}
                                    {% set grupos = [] %}
                                    {% for cat in categorias %}
                                        {% if cat.grupo not in grupos %}
                                            {% if grupos %}
                                </optgroup>
                                            {% endif %}
                                <optgroup label="{{ 'üöó' if cat.grupo == 'Ve√≠culo' else 'üîß' }} {{ cat.grupo }}s">
                                            {% set _ = grupos.append(cat.grupo) %}
                                        {% endif %}
                                    <option value="{{ cat.nome }}">{{ cat.nome }}</option>
                                    {% endfor %}
                                </optgroup>
                                {% else %}
                                <optgroup label="üöó Ve√≠culos">
                                    <option value="Caminh√£o">üöõ Caminh√£o</option>
                                    <option value="Van">üöê Van</option>
                                    <option value="Pickup">üõª Pickup</option>
                                    <option value="Carro">üöó Carro</option>
                                    <option value="Moto">üèçÔ∏è Moto</option>
                                </optgroup>
                                {% if is_servico %}
                                <optgroup label="üîß Equipamentos">
                                    <option value="Equipamento">‚öôÔ∏è Equipamento</option>
                                    <option value="M√°quina">üèóÔ∏è M√°quina</option>
                                    <option value="Implemento">üî© Implemento Agr√≠cola</option>
                                    <option value="Ferramenta">üõ†Ô∏è Ferramenta</option>
                                    <option value="Compressor">üí® Compressor</option>
                                    <option value="Gerador">‚ö° Gerador</option>
                                    <option value="Bomba">üíß Bomba Hidr√°ulica</option>
                                    <option value="Prensa">üî® Prensa</option>
                                    <option value="Empilhadeira">üì¶ Empilhadeira</option>
                                    <option value="Guincho">üèóÔ∏è Guincho/Munck</option>
                                </optgroup>
                                {% else %}
                                <optgroup label="üîß M√°quinas">
                                    <option value="M√°quina">üèóÔ∏è M√°quina</option>
                                </optgroup>
                                {% endif %}
                                {% endif %}
                            </select>
                        </div>
                        <div class="col-md-6 mb-3">
                            <label class="form-label">Marca/Fabricante</label>
                            <input type="text" class="form-control" id="edit-marca" required>
                        </div>
                    </div>
                    <div class="row">
                        <div class="col-md-6 mb-3">
                            <label class="form-label">Modelo/Descri√ß√£o</label>
                            <input type="text" class="form-control" id="edit-modelo" required>
                        </div>
                        <div class="col-md-6 mb-3">
                            <label class="form-label">Placa/Identifica√ß√£o</label>
                            <input type="text" class="form-control" id="edit-placa" required>
                        </div>
                    </div>
                    <div class="row">
                        <div class="col-md-6 mb-3">
                            <label class="form-label">Ano</label>
                            <input type="number" class="form-control" id="edit-ano" min="1990" max="2030">
                        </div>
                        <div class="col-md-6 mb-3">
                            <label class="form-label" id="label-quilometragem-edit">Quilometragem / Horas</label>
                            <div class="input-group">
                                <input type="number" class="form-control" id="edit-quilometragem" min="0" placeholder="0">
                                <select class="form-select" id="edit-unidade-medida" style="max-width: 80px;">
                                    <option value="km">km</option>
                                    <option value="hr">hr</option>
                                </select>
                            </div>
                            <small class="text-muted">Use "hr" para m√°quinas/equipamentos</small>
                        </div>
                    </div>
                    <div class="mb-3">
                        <label class="form-label">Pr√≥xima Manuten√ß√£o</label>
                        <input type="date" class="form-control" id="edit-proxima-manutencao">
                    </div>
                    {% if is_servico %}
                    <div class="mb-3">
                        <label class="form-label">Cliente <span class="text-danger">*</span></label>
                        <select class="form-select" id="edit-cliente-id" required>
                            <option value="">Selecione o cliente</option>
                            {% for cliente in clientes %}
                            <option value="{{ cliente.id }}">{{ cliente.nome }}</option>
                            {% endfor %}
                        </select>
                    </div>
                    {% endif %}
                </form>
            </div>
            <div class="modal-footer">
                <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Cancelar</button>
                <button type="button" class="btn btn-warning" onclick="salvarEdicaoVeiculo()">
                    <i class="fas fa-save"></i> Salvar Altera√ß√µes
                </button>
            </div>
        </div>
    </div>
</div>



<!-- Modal Gerenciar Categorias - Design Profissional -->
<div class="modal fade" id="gerenciarCategoriasModal" tabindex="-1">
    <div class="modal-dialog modal-xl">
        <div class="modal-content">
            <div class="modal-header" style="background: linear-gradient(135deg, #1a1a2e 0%, #16213e 100%); border-bottom: 3px solid #0f3460;">
                <div class="d-flex align-items-center">
                    <div class="rounded-circle bg-primary p-2 me-3">
                        <i class="fas fa-layer-group text-white"></i>
                    </div>
                    <div>
                        <h5 class="modal-title text-white mb-0">Gerenciador de Categorias</h5>
                        <small class="text-light opacity-75">Personalize os tipos de ve√≠culos e equipamentos</small>
                    </div>
                </div>
                <button type="button" class="btn-close btn-close-white" data-bs-dismiss="modal"></button>
            </div>
            <div class="modal-body p-0">
                <div class="row g-0">
                    <!-- Painel Esquerdo - Lista de Categorias -->
                    <div class="col-md-7 border-end" style="background: #f8f9fa;">
                        <!-- Tabs -->
                        <ul class="nav nav-tabs nav-fill border-bottom-0" id="categoriaTabs" role="tablist">
                            <li class="nav-item" role="presentation">
                                <button class="nav-link active py-3" id="veiculos-tab" data-bs-toggle="tab" data-bs-target="#veiculos-panel" type="button">
                                    <i class="fas fa-car me-2"></i>Ve√≠culos
                                    <span class="badge bg-primary ms-2" id="count-veiculos">0</span>
                                </button>
                            </li>
                            <li class="nav-item" role="presentation">
                                <button class="nav-link py-3" id="equipamentos-tab" data-bs-toggle="tab" data-bs-target="#equipamentos-panel" type="button">
                                    <i class="fas fa-tools me-2"></i>Equipamentos
                                    <span class="badge bg-success ms-2" id="count-equipamentos">0</span>
                                </button>
                            </li>
                        </ul>
                        
                        <div class="tab-content p-3" style="max-height: 400px; overflow-y: auto;">
                            <div class="tab-pane fade show active" id="veiculos-panel" role="tabpanel">
                                <div id="lista-veiculos-categorias">
                                    <!-- Preenchido via JS -->
                                </div>
                            </div>
                            <div class="tab-pane fade" id="equipamentos-panel" role="tabpanel">
                                <div id="lista-equipamentos-categorias">
                                    <!-- Preenchido via JS -->
                                </div>
                            </div>
                        </div>
                        
                        <!-- Bot√£o Inicializar -->
                        <div class="p-3 border-top bg-white" id="btn-inicializar-container" style="display: none;">
                            <button class="btn btn-outline-primary w-100" onclick="inicializarCategoriasPadrao()">
                                <i class="fas fa-magic me-2"></i>Carregar Categorias Padr√£o
                            </button>
                        </div>
                    </div>
                    
                    <!-- Painel Direito - Adicionar Nova -->
                    <div class="col-md-5" style="background: linear-gradient(180deg, #ffffff 0%, #f0f4f8 100%);">
                        <div class="p-4">
                            <h6 class="text-primary mb-4">
                                <i class="fas fa-plus-circle me-2"></i>Nova Categoria
                            </h6>
                            
                            <!-- Preview -->
                            <div class="text-center mb-4 p-4 rounded-3" style="background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);">
                                <div class="rounded-circle mx-auto mb-3 d-flex align-items-center justify-content-center" 
                                     id="preview-icone-container"
                                     style="width: 80px; height: 80px; background: rgba(255,255,255,0.2);">
                                    <i class="fas fa-cube fa-2x text-white" id="preview-icone"></i>
                                </div>
                                <h5 class="text-white mb-0" id="preview-nome">Nova Categoria</h5>
                                <span class="badge bg-light text-dark mt-2" id="preview-grupo">Ve√≠culo</span>
                            </div>
                            
                            <!-- Form -->
                            <div class="mb-3">
                                <label class="form-label fw-semibold">
                                    <i class="fas fa-tag text-muted me-1"></i>Nome
                                </label>
                                <input type="text" class="form-control form-control-lg" id="cat-nome" 
                                       placeholder="Ex: Retroescavadeira" oninput="atualizarPreview()">
                            </div>
                            
                            <div class="mb-3">
                                <label class="form-label fw-semibold">
                                    <i class="fas fa-folder text-muted me-1"></i>Grupo
                                </label>
                                <div class="btn-group w-100" role="group">
                                    <input type="radio" class="btn-check" name="cat-grupo-radio" id="grupo-veiculo" value="Ve√≠culo" checked onchange="atualizarPreview()">
                                    <label class="btn btn-outline-primary" for="grupo-veiculo">
                                        <i class="fas fa-car me-1"></i>Ve√≠culo
                                    </label>
                                    <input type="radio" class="btn-check" name="cat-grupo-radio" id="grupo-equipamento" value="Equipamento" onchange="atualizarPreview()">
                                    <label class="btn btn-outline-success" for="grupo-equipamento">
                                        <i class="fas fa-tools me-1"></i>Equipamento
                                    </label>
                                </div>
                            </div>
                            
                            <div class="mb-3">
                                <label class="form-label fw-semibold">
                                    <i class="fas fa-icons text-muted me-1"></i>√çcone
                                </label>
                                <div class="row g-2" id="icones-grid">
                                    <div class="col-3"><button type="button" class="btn btn-outline-secondary w-100 icone-btn active" data-icone="fa-truck" onclick="selecionarIcone(this)"><i class="fas fa-truck"></i></button></div>
                                    <div class="col-3"><button type="button" class="btn btn-outline-secondary w-100 icone-btn" data-icone="fa-car" onclick="selecionarIcone(this)"><i class="fas fa-car"></i></button></div>
                                    <div class="col-3"><button type="button" class="btn btn-outline-secondary w-100 icone-btn" data-icone="fa-motorcycle" onclick="selecionarIcone(this)"><i class="fas fa-motorcycle"></i></button></div>
                                    <div class="col-3"><button type="button" class="btn btn-outline-secondary w-100 icone-btn" data-icone="fa-shuttle-van" onclick="selecionarIcone(this)"><i class="fas fa-shuttle-van"></i></button></div>
                                    <div class="col-3"><button type="button" class="btn btn-outline-secondary w-100 icone-btn" data-icone="fa-tractor" onclick="selecionarIcone(this)"><i class="fas fa-tractor"></i></button></div>
                                    <div class="col-3"><button type="button" class="btn btn-outline-secondary w-100 icone-btn" data-icone="fa-cogs" onclick="selecionarIcone(this)"><i class="fas fa-cogs"></i></button></div>
                                    <div class="col-3"><button type="button" class="btn btn-outline-secondary w-100 icone-btn" data-icone="fa-tools" onclick="selecionarIcone(this)"><i class="fas fa-tools"></i></button></div>
                                    <div class="col-3"><button type="button" class="btn btn-outline-secondary w-100 icone-btn" data-icone="fa-wrench" onclick="selecionarIcone(this)"><i class="fas fa-wrench"></i></button></div>
                                    <div class="col-3"><button type="button" class="btn btn-outline-secondary w-100 icone-btn" data-icone="fa-bolt" onclick="selecionarIcone(this)"><i class="fas fa-bolt"></i></button></div>
                                    <div class="col-3"><button type="button" class="btn btn-outline-secondary w-100 icone-btn" data-icone="fa-water" onclick="selecionarIcone(this)"><i class="fas fa-water"></i></button></div>
                                    <div class="col-3"><button type="button" class="btn btn-outline-secondary w-100 icone-btn" data-icone="fa-hammer" onclick="selecionarIcone(this)"><i class="fas fa-hammer"></i></button></div>
                                    <div class="col-3"><button type="button" class="btn btn-outline-secondary w-100 icone-btn" data-icone="fa-cube" onclick="selecionarIcone(this)"><i class="fas fa-cube"></i></button></div>
                                </div>
                            </div>
                            
                            <div class="mb-4">
                                <label class="form-label fw-semibold">
                                    <i class="fas fa-palette text-muted me-1"></i>Cor
                                </label>
                                <div class="d-flex gap-2 flex-wrap" id="cores-grid">
                                    <button type="button" class="btn rounded-circle cor-btn active" data-cor="primary" onclick="selecionarCor(this)" style="width:40px;height:40px;background:#0d6efd;border:3px solid transparent;"></button>
                                    <button type="button" class="btn rounded-circle cor-btn" data-cor="success" onclick="selecionarCor(this)" style="width:40px;height:40px;background:#198754;border:3px solid transparent;"></button>
                                    <button type="button" class="btn rounded-circle cor-btn" data-cor="info" onclick="selecionarCor(this)" style="width:40px;height:40px;background:#0dcaf0;border:3px solid transparent;"></button>
                                    <button type="button" class="btn rounded-circle cor-btn" data-cor="warning" onclick="selecionarCor(this)" style="width:40px;height:40px;background:#ffc107;border:3px solid transparent;"></button>
                                    <button type="button" class="btn rounded-circle cor-btn" data-cor="danger" onclick="selecionarCor(this)" style="width:40px;height:40px;background:#dc3545;border:3px solid transparent;"></button>
                                    <button type="button" class="btn rounded-circle cor-btn" data-cor="secondary" onclick="selecionarCor(this)" style="width:40px;height:40px;background:#6c757d;border:3px solid transparent;"></button>
                                    <button type="button" class="btn rounded-circle cor-btn" data-cor="dark" onclick="selecionarCor(this)" style="width:40px;height:40px;background:#212529;border:3px solid transparent;"></button>
                                </div>
                            </div>
                            
                            <button class="btn btn-primary btn-lg w-100" onclick="salvarNovaCategoria()">
                                <i class="fas fa-plus-circle me-2"></i>Adicionar Categoria
                            </button>
                        </div>
                    </div>
                </div>
            </div>
            <div class="modal-footer bg-light">
                <small class="text-muted me-auto">
                    <i class="fas fa-info-circle me-1"></i>
                    As categorias ser√£o exibidas nos formul√°rios de cadastro
                </small>
                <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">
                    <i class="fas fa-times me-1"></i>Fechar
                </button>
            </div>
        </div>
    </div>
</div>

<script src="{{ url_for('static', filename='js/veiculos.js') }}"></script>
{% endblock %}